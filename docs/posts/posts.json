[
  {
    "path": "posts/2021-02-22-spatial-analysis-of-species-richness/",
    "title": "Spatial Analysis Using Raster Data",
    "description": "Species richness of cetaceans along the California coast.",
    "author": [
      {
        "name": "Janelle C",
        "url": {}
      }
    ],
    "date": "2021-02-22",
    "categories": [],
    "contents": "\r\nCetacean Data\r\nRead in cetacean data using raster::stack() and explore using the plot() function.\r\n\r\nhide\r\nmy_files <- list.files(path = \"ca_cetaceans\", full.names = TRUE)\r\n\r\ncetaceans <- raster::stack(my_files)\r\n\r\nplot(cetaceans)\r\n\r\n\r\n\r\n\r\nFigure 1: Figure 1. Species abundance along the California costline. Higher levels of presence are shown in green and lower levels shown in pink.\r\n\r\n\r\n\r\nPresence and Threshold\r\nCreate a function to Set a threshold for the presence of the species at 0.6, and assign a value for 1 if present or 0 if not not.\r\n\r\nhide\r\nis_present <- function(x, thresh = .6) {\r\n  y <- ifelse(x >= thresh, 1, NA)\r\n  return(y)\r\n}\r\n\r\ncetaceans_present <- calc(cetaceans, fun = is_present)\r\n\r\nplot(cetaceans_present)\r\n\r\n\r\n\r\n\r\nFigure 2: Figure 2. Presence of species on the California coast. Areas colored in yellow have an abundance higher than 0.6. Areas that are not colored in are either lower than 0.6 or did not show any signs of named species in that cell.\r\n\r\n\r\n\r\nFinalized plot of species richness\r\n\r\nhide\r\ncetaceans_df <- raster::rasterToPoints(cetaceans_present) %>% \r\n  as.data.frame() %>% \r\n  pivot_longer(cols = Balaenoptera_acutorostrata:Ziphius_cavirostris,\r\n               names_to = \"species\",\r\n               values_to = \"present\") %>%\r\n  group_by(x, y) %>% \r\n  replace_na(list(present = 0)) %>% \r\n  filter(present == 1) %>% \r\n  count(present)\r\n\r\nworld <- ne_countries(scale='medium',returnclass = 'sf')\r\n\r\n\r\nggplot() +\r\n  geom_raster(data = cetaceans_df, aes(x = x, y = y, fill = n)) +\r\n  geom_sf(data = world) +\r\n  coord_sf(expand = 0, xlim = c(-125, -115), ylim = c(32, 38)) +\r\n  theme_void() +\r\n  scale_fill_gradientn(colors = c(\"lightblue1\", \"aquamarine4\")) +\r\n  theme(legend.position = c(0.85, 0.8),\r\n        legend.background = element_rect(fill = \"gray75\", linetype = \"solid\"),\r\n        legend.key.size = unit(0.5, \"cm\"),\r\n        legend.key.width = unit(0.5,\"cm\"),\r\n        legend.margin=margin(t = 0.2, b = 0.2, l = 0.2, r = 0.2, unit='cm'),\r\n        plot.margin = unit(c(0,0,0,0), units = \"cm\")) +\r\n  labs(fill = \"Species Richness\") +\r\n  annotation_scale(pad_x = unit(7.5, \"cm\"), aes(unit_category = \"imperial\", style = \"bar\")) +\r\n  annotation_north_arrow(height = unit(1.5, \"cm\"), width = unit(1.5, \"cm\"), style = north_arrow_nautical())\r\n\r\n\r\n\r\n\r\nFigure 3: Figure 3. Species richness of cetaceans on the California coast. Areas colored in darker green have higher richness, and lighter areas have lower richness.\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-02-22-spatial-analysis-of-species-richness/spatial-analysis-of-species-richness_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-02-23T21:07:20-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-09-welcome/",
    "title": "Welcome.",
    "description": {},
    "author": [
      {
        "name": "Janelle C",
        "url": {}
      }
    ],
    "date": "2021-02-09",
    "categories": [],
    "contents": "\r\nThis part of my site is intended to display some of my previous work. I’ve done work and am comfortable with R, R Shiny, RMarkdown, ArcGIS, and of course, the {postcards} and {distill} packages. I hope you have fun exploring, I had fun creating.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-09T13:56:36-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-13-analysis-of-sierra-amphibians/",
    "title": "Analysis of Sierra Amphibians",
    "description": "Ampibian counts and use of `patchwork`",
    "author": [
      {
        "name": "Janelle C",
        "url": {}
      }
    ],
    "date": "2021-01-21",
    "categories": [],
    "contents": "\r\nRead in the data\r\n\r\n\r\nsierra_df <- readxl::read_xlsx(\"sierra_amphibians.xlsx\")\r\n\r\n\r\n\r\nTask 1.1\r\nA graph of total mountain yellow-legged frog (Rana muscosa) count each year across all water bodies, by life stage excluding the ‘EggMass’ level.\r\n\r\n\r\nramu_df <- sierra_df %>% \r\n  filter(amphibian_species == \"RAMU\") %>% \r\n  filter(!amphibian_life_stage == \"EggMass\") %>% \r\n  mutate(survey_date = lubridate::ymd(survey_date)) %>% \r\n  mutate(year = year(survey_date)) %>% \r\n  group_by(year) %>% \r\n  count(amphibian_life_stage, wt = amphibian_number)\r\n#wt = amphibian number essentially performs the uncount function within the count function\r\n\r\nramu_plot <- ggplot(ramu_df, aes(x = year, y = n)) +\r\n  geom_col(aes(fill = year), color = \"black\", show.legend = FALSE) +\r\n  scale_fill_gradientn(colours = c(\"gold\",\"darkgoldenrod3\", \"darkolivegreen4\") ) +\r\n  facet_wrap(~amphibian_life_stage, scales = \"free\") + #without scales = \"free\" the numbers are a bit hard to see for the lifestages other than tadpole\r\n  theme_minimal() +\r\n  labs(title = expression(paste(\"Count of mountain yellow-legged frog (\", italic(\"Rana muscosa\"), \") by lifestage\")),\r\n       x = NULL,\r\n       y = \"Count\") +\r\n  theme(panel.border = element_rect(colour = \"black\", fill=NA, size=0.5))\r\n\r\n\r\n\r\nTask 1.2\r\nA column graph containing total counts (over all years of the study) of combined adult and subadult endangered mountain yellow-legged frogs (Rana muscosa) observed in the 5 lakes with the greatest total observed counts.\r\n\r\n\r\nlake_df <- sierra_df %>% \r\n  filter(amphibian_species == \"RAMU\") %>% \r\n  filter(!amphibian_life_stage %in% c(\"EggMass\", \"Tadpole\")) %>% \r\n  mutate(lake_number = paste(\"Lake\", lake_id)) %>% \r\n  group_by(lake_number) %>% \r\n  count(amphibian_life_stage, wt = amphibian_number) \r\n#wt = amphibian number essentially performs the uncount function within the count function\r\n\r\nlake_df_top_5 <- lake_df %>% \r\n  count(lake_number, wt = n) %>% \r\n  ungroup(lake_number) %>% \r\n  rename(amphibian_count = n) %>% \r\n  slice_max(amphibian_count, n = 5)\r\n\r\nlake_df_lifestage <- lake_df %>% \r\n  inner_join(lake_df_top_5) %>% \r\n  rename(lifestage_count = n) \r\n\r\nlake_plot <- ggplot(lake_df_lifestage, aes(y = lifestage_count, x = fct_reorder(lake_number, lifestage_count))) +\r\n  geom_bar(position = \"stack\", stat = \"identity\", aes(fill = amphibian_life_stage)) +\r\n  scale_fill_manual(values = c(\"darkgoldenrod3\", \"darkolivegreen4\", breaks = c(\"Adult\", \"SubAdult\"))) +\r\n  coord_flip() +\r\n  labs(fill = \"Life-stage\",\r\n       title = \"Lakes with the highest numbers of mountain yellow-legged frog\",\r\n       x = NULL,\r\n       y = \"Count\")+\r\n  theme_minimal() +\r\n  theme(legend.position = c(0.85,0.25))+\r\n  theme(panel.border = element_rect(colour = \"black\", fill=NA, size=0.5))\r\n  \r\n#lake_plot\r\n\r\n\r\n\r\nFinal plot for mountain yellow-legged frog using patchwork\r\n\r\n\r\nramu_plot / lake_plot\r\n\r\n\r\n\r\n\r\nFigure 1: Figure 1. Plot of counts of mountain yellow legged frogs, by year and life-stage, as well as by top 5 lakes with the highest total counts of adults in subadults. In the upper plots, the different colors of bars display different years. In the lower plot, green depicts total counts through all years for subadults and yellow depicts total counts through all years for adults in each lake surveyed\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-13-analysis-of-sierra-amphibians/analysis-of-sierra-amphibians_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2021-03-13T11:59:04-08:00",
    "input_file": "analysis-of-sierra-amphibians.utf8.md"
  }
]
